.TH "USART_Group6" 3 "Version 0.1.-" "Square Root Approximation" \" -*- nroff -*-
.ad l
.nh
.SH NAME
USART_Group6 \- Smartcard mode functions
.PP
 \- Smartcard mode functions\&.  

.SH SYNOPSIS
.br
.PP
.SS "Functions"

.in +1c
.ti -1c
.RI "void \fBUSART_SetGuardTime\fP (USART_TypeDef *USARTx, uint8_t USART_GuardTime)"
.br
.RI "Sets the specified USART guard time\&. "
.ti -1c
.RI "void \fBUSART_SmartCardCmd\fP (USART_TypeDef *USARTx, FunctionalState NewState)"
.br
.RI "Enables or disables the USART's Smart Card mode\&. "
.ti -1c
.RI "void \fBUSART_SmartCardNACKCmd\fP (USART_TypeDef *USARTx, FunctionalState NewState)"
.br
.RI "Enables or disables NACK transmission\&. "
.in -1c
.SH "Detailed Description"
.PP 
Smartcard mode functions\&. 


.PP
.nf
 ===============================================================================
                               Smartcard mode functions
 ===============================================================================  

  This subsection provides a set of functions allowing to manage the USART 
  Smartcard communication\&.
  
  The Smartcard interface is designed to support asynchronous protocol Smartcards as
  defined in the ISO 7816-3 standard\&.

  The USART can provide a clock to the smartcard through the SCLK output\&.
  In smartcard mode, SCLK is not associated to the communication but is simply derived 
  from the internal peripheral input clock through a 5-bit prescaler\&.

  Smartcard communication is possible through the following procedure:
     1\&. Configures the Smartcard Prescaler using the USART_SetPrescaler() function\&.
     2\&. Configures the Smartcard Guard Time using the USART_SetGuardTime() function\&.
     3\&. Program the USART clock using the USART_ClockInit() function as following:
        - USART Clock enabled
        - USART CPOL Low
        - USART CPHA on first edge
        - USART Last Bit Clock Enabled
     4\&. Program the Smartcard interface using the USART_Init() function as following:
        - Word Length = 9 Bits
        - 1\&.5 Stop Bit
        - Even parity
        - BaudRate = 12096 baud
        - Hardware flow control disabled (RTS and CTS signals)
        - Tx and Rx enabled
     5\&. Optionally you can enable the parity error interrupt using the USART_ITConfig()
        function
     6\&. Enable the USART using the USART_Cmd() function\&.
     7\&. Enable the Smartcard NACK using the USART_SmartCardNACKCmd() function\&.
     8\&. Enable the Smartcard interface using the USART_SmartCardCmd() function\&.

  Please refer to the ISO 7816-3 specification for more details\&.


@note It is also possible to choose 0\&.5 stop bit for receiving but it is recommended 
      to use 1\&.5 stop bits for both transmitting and receiving to avoid switching 
      between the two configurations\&.
@note In smartcard mode, the following bits must be kept cleared:
        - LINEN bit in the USART_CR2 register\&.
        - HDSEL and IREN bits in the USART_CR3 register\&.
@note Smartcard mode is available on USART peripherals only (not available on UART4 
      and UART5 peripherals)\&.
.fi
.PP
 
.SH "Function Documentation"
.PP 
.SS "void USART_SetGuardTime (USART_TypeDef * USARTx, uint8_t USART_GuardTime)"

.PP
Sets the specified USART guard time\&. 
.PP
\fBParameters\fP
.RS 4
\fIUSARTx\fP where x can be 1, 2, 3 or 6 to select the USART or UART peripheral\&. 
.br
\fIUSART_GuardTime\fP specifies the guard time\&. 
.br
 
.RE
.PP
\fBReturn values\fP
.RS 4
\fINone\fP 
.RE
.PP

.SS "void USART_SmartCardCmd (USART_TypeDef * USARTx, FunctionalState NewState)"

.PP
Enables or disables the USART's Smart Card mode\&. 
.PP
\fBParameters\fP
.RS 4
\fIUSARTx\fP where x can be 1, 2, 3 or 6 to select the USART or UART peripheral\&. 
.br
\fINewState\fP new state of the Smart Card mode\&. This parameter can be: ENABLE or DISABLE\&. 
.br
 
.RE
.PP
\fBReturn values\fP
.RS 4
\fINone\fP 
.RE
.PP

.SS "void USART_SmartCardNACKCmd (USART_TypeDef * USARTx, FunctionalState NewState)"

.PP
Enables or disables NACK transmission\&. 
.PP
\fBParameters\fP
.RS 4
\fIUSARTx\fP where x can be 1, 2, 3 or 6 to select the USART or UART peripheral\&. 
.br
\fINewState\fP new state of the NACK transmission\&. This parameter can be: ENABLE or DISABLE\&. 
.br
 
.RE
.PP
\fBReturn values\fP
.RS 4
\fINone\fP 
.RE
.PP

.SH "Author"
.PP 
Generated automatically by Doxygen for Square Root Approximation from the source code\&.
