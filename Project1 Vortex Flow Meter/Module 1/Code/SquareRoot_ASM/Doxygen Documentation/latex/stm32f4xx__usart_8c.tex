\doxysection{drivers/stm32f4xx\+\_\+usart.c File Reference}
\hypertarget{stm32f4xx__usart_8c}{}\label{stm32f4xx__usart_8c}\index{drivers/stm32f4xx\_usart.c@{drivers/stm32f4xx\_usart.c}}


This file provides firmware functions to manage the following functionalities of the Universal synchronous asynchronous receiver transmitter (USART)\+: ~\newline
  


{\ttfamily \#include "{}stm32f4xx\+\_\+rcc.\+h"{}}\newline
{\ttfamily \#include "{}stm32f4xx\+\_\+usart.\+h"{}}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{group___u_s_a_r_t_ga8d425258898b4af4ebc820f52635fad8}{CR1\+\_\+\+CLEAR\+\_\+\+MASK}}
\item 
\#define \mbox{\hyperlink{group___u_s_a_r_t_ga7834b3d9be4875de242f87c12fd79f02}{CR2\+\_\+\+CLOCK\+\_\+\+CLEAR\+\_\+\+MASK}}
\item 
\#define \mbox{\hyperlink{group___u_s_a_r_t_ga5c882571db73abc5d1837368a1cb0a64}{CR3\+\_\+\+CLEAR\+\_\+\+MASK}}~((uint16\+\_\+t)(USART\+\_\+\+CR3\+\_\+\+RTSE \texorpdfstring{$\vert$}{|} USART\+\_\+\+CR3\+\_\+\+CTSE))
\item 
\#define \mbox{\hyperlink{group___u_s_a_r_t_gacde7fc0e46b3a5fc7e2002b2915884d5}{IT\+\_\+\+MASK}}~((uint16\+\_\+t)0x001F)
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group1_ga2f8e1ce72da21b6539d8e1f299ec3b0d}{USART\+\_\+\+De\+Init}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx)
\begin{DoxyCompactList}\small\item\em Deinitializes the USARTx peripheral registers to their default reset values. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group1_ga98da340ea0324002ba1b4263e91ab2ff}{USART\+\_\+\+Init}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, \mbox{\hyperlink{struct_u_s_a_r_t___init_type_def}{USART\+\_\+\+Init\+Type\+Def}} \texorpdfstring{$\ast$}{*}USART\+\_\+\+Init\+Struct)
\begin{DoxyCompactList}\small\item\em Initializes the USARTx peripheral according to the specified parameters in the USART\+\_\+\+Init\+Struct . \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group1_ga34e1faa2f312496c16cfd05155f4c8b1}{USART\+\_\+\+Struct\+Init}} (\mbox{\hyperlink{struct_u_s_a_r_t___init_type_def}{USART\+\_\+\+Init\+Type\+Def}} \texorpdfstring{$\ast$}{*}USART\+\_\+\+Init\+Struct)
\begin{DoxyCompactList}\small\item\em Fills each USART\+\_\+\+Init\+Struct member with its default value. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group1_gadb50c7a2175c91acd3728f8eefd0c63d}{USART\+\_\+\+Clock\+Init}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, \mbox{\hyperlink{struct_u_s_a_r_t___clock_init_type_def}{USART\+\_\+\+Clock\+Init\+Type\+Def}} \texorpdfstring{$\ast$}{*}USART\+\_\+\+Clock\+Init\+Struct)
\begin{DoxyCompactList}\small\item\em Initializes the USARTx peripheral Clock according to the specified parameters in the USART\+\_\+\+Clock\+Init\+Struct . \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group1_ga59df27d0adda18b16ee28d47672cc724}{USART\+\_\+\+Clock\+Struct\+Init}} (\mbox{\hyperlink{struct_u_s_a_r_t___clock_init_type_def}{USART\+\_\+\+Clock\+Init\+Type\+Def}} \texorpdfstring{$\ast$}{*}USART\+\_\+\+Clock\+Init\+Struct)
\begin{DoxyCompactList}\small\item\em Fills each USART\+\_\+\+Clock\+Init\+Struct member with its default value. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group1_ga45e51626739c5f22a6567c8a85d1d85e}{USART\+\_\+\+Cmd}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disables the specified USART peripheral. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group1_gaf5da8f2eee8245425584d85d4f62cc33}{USART\+\_\+\+Set\+Prescaler}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, uint8\+\_\+t USART\+\_\+\+Prescaler)
\begin{DoxyCompactList}\small\item\em Sets the system clock prescaler. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group1_ga3897bab07491d9239f8a238a9a7cddea}{USART\+\_\+\+Over\+Sampling8\+Cmd}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disables the USART\textquotesingle{}s 8x oversampling mode. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group1_ga3ed89ea8765d851510cfe90f7d90cbbb}{USART\+\_\+\+One\+Bit\+Method\+Cmd}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disables the USART\textquotesingle{}s one bit sampling method. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group2_ga0b43d42da9540f446d494bf69823c6fb}{USART\+\_\+\+Send\+Data}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, uint16\+\_\+t Data)
\begin{DoxyCompactList}\small\item\em Transmits single data through the USARTx peripheral. \end{DoxyCompactList}\item 
uint16\+\_\+t \mbox{\hyperlink{group___u_s_a_r_t___group2_gac67a91845b0b1d54d31bdfb1c5e9867c}{USART\+\_\+\+Receive\+Data}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx)
\begin{DoxyCompactList}\small\item\em Returns the most recent received data by the USARTx peripheral. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group3_ga65ec9928817f3f031dd9a4dfc95d6666}{USART\+\_\+\+Set\+Address}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, uint8\+\_\+t USART\+\_\+\+Address)
\begin{DoxyCompactList}\small\item\em Sets the address of the USART node. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group3_gac27b78ce445a16fe33851d2f87781c02}{USART\+\_\+\+Receiver\+Wake\+Up\+Cmd}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Determines if the USART is in mute mode or not. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group3_ga4965417c2412c36e462fcad50a8d5393}{USART\+\_\+\+Wake\+Up\+Config}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, uint16\+\_\+t USART\+\_\+\+Wake\+Up)
\begin{DoxyCompactList}\small\item\em Selects the USART Wake\+Up method. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group4_ga7bc2d291831cbc5e53e73337308029b5}{USART\+\_\+\+LINBreak\+Detect\+Length\+Config}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, uint16\+\_\+t USART\+\_\+\+LINBreak\+Detect\+Length)
\begin{DoxyCompactList}\small\item\em Sets the USART LIN Break detection length. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group4_ga9fdd6296f4ca4acdfcbd58bf56bd4185}{USART\+\_\+\+LINCmd}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disables the USART\textquotesingle{}s LIN mode. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group4_ga39a3d33e23ee28529fa8f7259ce6811e}{USART\+\_\+\+Send\+Break}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx)
\begin{DoxyCompactList}\small\item\em Transmits break characters. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group5_gaaa23b05fe0e1896bad90da7f82750831}{USART\+\_\+\+Half\+Duplex\+Cmd}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disables the USART\textquotesingle{}s Half Duplex communication. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group6_gac4a35c6acd71ae7e0d67c1f03f0a8777}{USART\+\_\+\+Set\+Guard\+Time}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, uint8\+\_\+t USART\+\_\+\+Guard\+Time)
\begin{DoxyCompactList}\small\item\em Sets the specified USART guard time. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group6_gabd1347e244c623447151ba3a5e986c5f}{USART\+\_\+\+Smart\+Card\+Cmd}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disables the USART\textquotesingle{}s Smart Card mode. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group6_ga62e22f47e38aa53f2edce8771f7a5dfa}{USART\+\_\+\+Smart\+Card\+NACKCmd}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disables NACK transmission. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group7_ga81a0cd36199040bf6d266b57babd678e}{USART\+\_\+\+Ir\+DAConfig}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, uint16\+\_\+t USART\+\_\+\+Ir\+DAMode)
\begin{DoxyCompactList}\small\item\em Configures the USART\textquotesingle{}s Ir\+DA interface. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group7_gabff56ebb494fdfadcc6ef4fe9ac8dd24}{USART\+\_\+\+Ir\+DACmd}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disables the USART\textquotesingle{}s Ir\+DA interface. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group8_ga902857f199ebfba21c63d725354af66f}{USART\+\_\+\+DMACmd}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, uint16\+\_\+t USART\+\_\+\+DMAReq, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disables the USART\textquotesingle{}s DMA interface. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group9_ga6d8f2dd1f34060ae7e386e3e5d56b6f6}{USART\+\_\+\+ITConfig}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, uint16\+\_\+t USART\+\_\+\+IT, Functional\+State New\+State)
\begin{DoxyCompactList}\small\item\em Enables or disables the specified USART interrupts. \end{DoxyCompactList}\item 
Flag\+Status \mbox{\hyperlink{group___u_s_a_r_t___group9_ga144630722defc9e312f0ad280b68e9da}{USART\+\_\+\+Get\+Flag\+Status}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, uint16\+\_\+t USART\+\_\+\+FLAG)
\begin{DoxyCompactList}\small\item\em Checks whether the specified USART flag is set or not. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group9_gad962e148fc466ae1b45b288f6c91d966}{USART\+\_\+\+Clear\+Flag}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, uint16\+\_\+t USART\+\_\+\+FLAG)
\begin{DoxyCompactList}\small\item\em Clears the USARTx\textquotesingle{}s pending flags. \end{DoxyCompactList}\item 
ITStatus \mbox{\hyperlink{group___u_s_a_r_t___group9_ga93d8f031241bcdbe938d091a85295445}{USART\+\_\+\+Get\+ITStatus}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, uint16\+\_\+t USART\+\_\+\+IT)
\begin{DoxyCompactList}\small\item\em Checks whether the specified USART interrupt has occurred or not. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group___u_s_a_r_t___group9_ga1fc25d0338695063be5e50156955d9bc}{USART\+\_\+\+Clear\+ITPending\+Bit}} (USART\+\_\+\+Type\+Def \texorpdfstring{$\ast$}{*}USARTx, uint16\+\_\+t USART\+\_\+\+IT)
\begin{DoxyCompactList}\small\item\em Clears the USARTx\textquotesingle{}s interrupt pending bits. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file provides firmware functions to manage the following functionalities of the Universal synchronous asynchronous receiver transmitter (USART)\+: ~\newline
 

\begin{DoxyAuthor}{Author}
MCD Application Team 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
V1.\+0.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
30-\/September-\/2011
\begin{DoxyItemize}
\item Initialization and Configuration
\item Data transfers
\item Multi-\/\+Processor Communication
\item LIN mode
\item Half-\/duplex mode
\item Smartcard mode
\item Ir\+DA mode
\item DMA transfers management
\item Interrupts and flags management
\end{DoxyItemize}
\end{DoxyDate}
\begin{DoxyVerb}*      
*          ===================================================================
*                                 How to use this driver
*          ===================================================================
*          1. Enable peripheral clock using the follwoing functions
*             RCC_APB2PeriphClockCmd(RCC_APB2Periph_USARTx, ENABLE) for USART1 and USART6 
*             RCC_APB1PeriphClockCmd(RCC_APB1Periph_USARTx, ENABLE) for USART2, USART3, UART4 or UART5.
*
*          2.  According to the USART mode, enable the GPIO clocks using 
*              RCC_AHB1PeriphClockCmd() function. (The I/O can be TX, RX, CTS, 
*              or/and SCLK). 
*
*          3. Peripheral's alternate function: 
*                 - Connect the pin to the desired peripherals' Alternate 
*                   Function (AF) using GPIO_PinAFConfig() function
*                 - Configure the desired pin in alternate function by:
*                   GPIO_InitStruct->GPIO_Mode = GPIO_Mode_AF
*                 - Select the type, pull-up/pull-down and output speed via 
*                   GPIO_PuPd, GPIO_OType and GPIO_Speed members
*                 - Call GPIO_Init() function
*        
*          4. Program the Baud Rate, Word Length , Stop Bit, Parity, Hardware 
*             flow control and Mode(Receiver/Transmitter) using the USART_Init()
*             function.
*
*          5. For synchronous mode, enable the clock and program the polarity,
*             phase and last bit using the USART_ClockInit() function.
*
*          5. Enable the NVIC and the corresponding interrupt using the function 
*             USART_ITConfig() if you need to use interrupt mode. 
*
*          6. When using the DMA mode 
*                   - Configure the DMA using DMA_Init() function
*                   - Active the needed channel Request using USART_DMACmd() function
* 
*          7. Enable the USART using the USART_Cmd() function.
* 
*          8. Enable the DMA using the DMA_Cmd() function, when using DMA mode. 
*
*          Refer to Multi-Processor, LIN, half-duplex, Smartcard, IrDA sub-sections
*          for more details
*          
*          In order to reach higher communication baudrates, it is possible to
*          enable the oversampling by 8 mode using the function USART_OverSampling8Cmd().
*          This function should be called after enabling the USART clock (RCC_APBxPeriphClockCmd())
*          and before calling the function USART_Init().
*          
*  \end{DoxyVerb}


\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE TIME. AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY DIRECT, INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING FROM THE CONTENT OF SUCH FIRMWARE AND/\+OR THE USE MADE BY CUSTOMERS OF THE CODING INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.

\doxysubsubsection*{\begin{center}\copyright{} COPYRIGHT 2011 STMicroelectronics\end{center} }